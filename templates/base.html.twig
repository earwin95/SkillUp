<!DOCTYPE html>
<html lang="fr" data-theme="light">
	<head>
		<meta charset="UTF-8"/>
		<title>
			{% block title %}SkillUp
			{% endblock %}
		</title>
		<meta
		name="viewport" content="width=device-width, initial-scale=1"/>

		{# === Favicon === #}
		<link rel="icon" type="image/x-icon" href="{{ asset('images/favicon.ico') }}">
		<link rel="shortcut icon" href="{{ asset('images/favicon.ico') }}">

		<style>:root
		{
			--bg: #eaf1f8;
			--ink: #0f172a;
			--muted: #6b7280;
			--glass: #ffffffa8;
			--stroke: rgba(255, 255, 255, 0.45);
			--primary: #2563eb;
			--primary-2: #06b6d4;
			--nav1: #0f172a;
			--nav2: #1f2937;
			--radius: 24px;
			--shadow: 0 20px 50px rgba(15, 23, 42, 0.18);
			--panel: #ffffff;
			--panel-border: #eef2f7;
		}
		html[data-theme="dark"] {
			--bg: #0b1220;
			--ink: #e5e7eb;
			--muted: #9aa6b2;
			--glass: #0f172acc;
			--stroke: rgba(255, 255, 255, 0.10);
			--primary: #60a5fa;
			--primary-2: #22d3ee;
			--nav1: #0b1324;
			--nav2: #0f172a;
			--panel: #0f172a;
			--panel-border: #1f2937;
			--shadow: 0 22px 50px rgba(0, 0, 0, 0.45);
		}

		* {
			box-sizing: border-box
		}
		html,
		body {
			height: 100%
		}
		body {
			margin: 0;
			font: 15px / 1.6 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto;
			color: var(--ink);
			background: linear-gradient(180deg, rgba(255,255,255,0.1) 0%, rgba(15,23,42,0.65) 100%), url('https://tse2.mm.bing.net/th/id/OIP.QgVnwb2IeWjsgtVwtNgTaQHaEK?pid=Api') center/cover fixed, var(--bg);
			padding: 24px;
		}
		html[data-theme="dark"] body {
			background: linear-gradient(180deg, rgba(0,0,0,.55), rgba(0,0,0,.75)), url('https://tse2.mm.bing.net/th/id/OIP.QgVnwb2IeWjsgtVwtNgTaQHaEK?pid=Api') center/cover fixed, var(--bg);
		}

		.app {
			position: relative;
			z-index: 1;
			width: min(1200px, 100%);
			margin: 0 auto;
			overflow: hidden;
			background: linear-gradient(180deg, rgba(255,255,255,.82), rgba(255,255,255,.68));
			border: 1px solid var(--stroke); backdrop-filter: blur(12px);
			border-radius: 26px;
			box-shadow: var(--shadow);
		}
		html[data-theme="dark"] .app {
			background: linear-gradient(180deg, rgba(15,23,42,.82), rgba(15,23,42,.68));
		}

		.nav {
			display: flex;
			align-items: center;
			justify-content: space-between;
			padding: 12px 18px;
			background: linear-gradient(90deg, var(--nav1), var(--nav2));
			color: #e5edff;
		}
		/* Taille par défaut du logo dans la navbar */
		.brand-logo {
			height: 40px;
		}

		/* Compactage navbar sur mobile */
		@media(max-width: 720px) {
			.brand-logo {
				height: 32px;
			} /* logo plus petit */
			.nav {
				padding: 10px 14px;
			} /* navbar plus compacte */
			.nav-links {
				gap: 12px;
			} /* moins d’espace entre liens */
			.nav a {
				font-size: 14px;
			} /* typo un peu réduite */
			.pill {
				padding: 0.42rem 0.7rem;
			}; /* bouton arrondi un poil plus petit */
		}

		/* Très petit écran */
		@media(max-width: 480px) {
			.brand-logo {
				height: 28px;
			}
			.nav-links {
				gap: 10px;
			}
			.nav a {
				font-size: 13px;
			}
			.toggle {
				padding: 0.38rem 0.6rem;
				font-size: 13px;
			}
		}


		.brand {
			display: flex;
			align-items: center;
			gap: 0.8rem;
		}
		.logo {
			display: block;
			height: 50px;
			width: auto;
		}
		.brand-link {
			position: relative;
			display: inline-block;
			isolation: isolate;
		}
		/* glow dégradé autour du logo */
		/* .brand-link::before{
      content:''; position:absolute; inset:-8px -12px; border-radius:14px;
      background: linear-gradient(90deg, var(--primary), var(--primary-2));
      filter: blur(14px); opacity:.25; z-index:-1;
    } */

		.nav a {
			color: #dbeafe;
			text-decoration: none;
			font-weight: 600;
			opacity: .9;
			position: relative;
			padding: 0.25rem 0.4rem;
			transition: opacity 0.2s, color 0.2s;
		}
		/* retire l’underline animé bleu */
		.nav a::after {
			display: none !important;
		}
		.nav a:hover {
			opacity: 1;
			color: #fff;
		}

		.pill {
			background: linear-gradient(90deg, #111827, #0b1324);
			color: #e5edff;
			border: 1px solid rgba(255, 255, 255, 0.12);
			padding: 0.5rem 0.85rem;
			border-radius: 999px;
			text-decoration: none;
			font-weight: 700;
			transition: transform 0.15s, box-shadow 0.15s;
		}
		html[data-theme="dark"] .pill {
			background: linear-gradient(90deg, #0b1324, #111827);
		}
		.pill:hover {
			transform: translateY(-1px);
			box-shadow: 0 8px 18px rgba(2, 6, 23, 0.25);
		}
		/* Déconnexion en dégradé plein */
		.pill-gradient {
			background: linear-gradient(90deg, var(--primary), var(--primary-2)) !important;
			color: #fff !important;
			border: none !important;
		}
		.pill-gradient:hover {
			filter:brightness(1.05);
			box-shadow: 0 8px 20px rgba(37, 99, 235, 0.35);
		}

		.toggle {
			display: inline-flex;
			align-items: center;
			gap: 0.45rem;
			cursor: pointer;
			padding: 0.45rem 0.7rem;
			border-radius: 999px;
			border: 1px solid rgba(255, 255, 255, 0.15);
			color: #e5edff;
			background: transparent;
			font-weight: 700;
		}
		.toggle svg {
			display: block
		}

		.page {
			padding: 18px 42px 32px
		}
		@media(max-width:900px) {
			.page {
				padding: 16px 18px 28px
			}
		}

		/* --- Burger --- */
		.burger {
			display: none;
			position: relative;
			width: 42px;
			height: 42px;
			border: 1px solid rgba(255, 255, 255, 0.18);
			border-radius: 10px;
			background: transparent;
			cursor: pointer;
		}
		.burger span {
			position: absolute;
			left: 10px;
			right: 10px;
			height: 2px;
			background: #e5edff;
			transition: transform 0.25s, opacity 0.2s, top 0.25s;
		}
		.burger span:nth-child(1) {
			top: 13px
		}
		.burger span:nth-child(2) {
			top: 20px
		}
		.burger span:nth-child(3) {
			top: 27px
		}
		.burger.active span:nth-child(1) {
			top: 20px;
			transform: rotate(45deg)
		}
		.burger.active span:nth-child(2) {
			opacity: 0
		}
		.burger.active span:nth-child(3) {
			top: 20px;
			transform: rotate(-45deg)
		}

		/* layout responsive du menu */
		.nav-links {
			display: flex;
			gap: 18px;
			flex-wrap: wrap;
			align-items: center
		}
		@media(max-width:980px) {
			.burger {
				display: inline-block;
			}
			.nav {
				position: relative;
			}
			.nav-links {
				position: absolute;
				top: 64px;
				right: 18px;
				left: 18px;
				display: none;
				flex-direction: column;
				gap: 12px;
				padding: 14px;
				border-radius: 14px;
				border: 1px solid var(--stroke);
				background: linear-gradient(180deg, rgba(255,255,255,.92), rgba(255,255,255,.86));
				box-shadow: var(--shadow);
			}
			html[data-theme="dark"] .nav-links {
				background: linear-gradient(180deg, rgba(15,23,42,.92), rgba(15,23,42,.86));
			}
			.nav-links.open {
				display: flex;
			}
			.nav a,
			.pill,
			.toggle {
				width: 100%;
				text-align: left;
			}
		}

		/* === Bokeh animé === */
		.bg-bokeh {
			position: fixed;
			inset: 0;
			overflow: hidden;
			z-index: 0;
			pointer-events: none;
		}
		.bg-bokeh span {
			position: absolute;
			display: block;
			border-radius: 50%;
			background: radial-gradient(circle at 30% 30%, #3b82f6, #8b5cf6);
			opacity: .8;
			animation: float 25s linear infinite;
			bottom: -150px; filter: blur(1px);
		}
		@keyframes float {
			0% {
				transform: translateY(0) rotate(0deg);
				opacity: .7
			}
			50% {
				opacity: 1
			}
			100% {
				transform: translateY(-1200px) rotate(360deg);
				opacity: 0
			}
		}
		.bg-bokeh span:nth-child(1) {
			left: 25%;
			width: 80px;
			height: 80px;
			animation-duration: 20s;
			animation-delay: 0s
		}
		.bg-bokeh span:nth-child(2) {
			left: 10%;
			width: 20px;
			height: 20px;
			animation-duration: 25s;
			animation-delay: 2s
		}
		.bg-bokeh span:nth-child(3) {
			left: 70%;
			width: 20px;
			height: 20px;
			animation-duration: 22s;
			animation-delay: 4s
		}
		.bg-bokeh span:nth-child(4) {
			left: 40%;
			width: 60px;
			height: 60px;
			animation-duration: 18s;
			animation-delay: 0s
		}
		.bg-bokeh span:nth-child(5) {
			left: 65%;
			width: 110px;
			height: 110px;
			animation-duration: 30s;
			animation-delay: 3s
		}
		.bg-bokeh span:nth-child(6) {
			left: 75%;
			width: 150px;
			height: 150px;
			animation-duration: 40s;
			animation-delay: 7s
		}
		.bg-bokeh span:nth-child(7) {
			left: 35%;
			width: 150px;
			height: 150px;
			animation-duration: 35s;
			animation-delay: 15s
		}
		.bg-bokeh span:nth-child(8) {
			left: 50%;
			width: 25px;
			height: 25px;
			animation-duration: 45s;
			animation-delay: 15s
		}
		.bg-bokeh span:nth-child(9) {
			left: 20%;
			width: 15px;
			height: 15px;
			animation-duration: 35s;
			animation-delay: 2s
		}
		.bg-bokeh span:nth-child(10) {
			left: 85%;
			width: 150px;
			height: 150px;
			animation-duration: 11s;
			animation-delay: 0s
		}
	</style>

	<script>
		(function () {
const saved = localStorage.getItem('theme');
const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
document.documentElement.setAttribute('data-theme', saved || (prefersDark ? 'dark' : 'light'));
})();

function toggleTheme() {
const html = document.documentElement;
const next = html.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
html.setAttribute('data-theme', next);
localStorage.setItem('theme', next);
}
	</script>
</head>

<body>
	<div class="app">
		<div class="nav">
			<div
				class="brand">
				{# Logo SkillUp #}
				<a href="{{ path('app_home') }}" class="brand-link">
					<img src="{{ asset('images/logo-skillup-full.png') }}" alt="SkillUp" class="brand-logo" height="40">
				</a>


			</div>

			{# Bouton burger #}
			<button class="burger" type="button" aria-label="Ouvrir le menu" aria-expanded="false" aria-controls="mainmenu">
				<span></span>
				<span></span>
				<span></span>
			</button>

			<div class="nav-links" id="mainmenu">
				<a href="{{ path('app_home') }}">Accueil</a>
				{% if app.user %}
					<a href="{{ path('offer_index') }}">Offres</a>
					<a href="{{ path('app_exchange_requests') }}">Mes demandes</a>
					<a href="{{ path('app_profile') }}">Profil</a>
					{% if 'ROLE_ADMIN' in app.user.roles %}
						<a href="{{ path('app_admin') }}">Admin</a>
					{% endif %}
					<a class="pill pill-gradient" href="{{ path('app_logout') }}">Déconnexion</a>
				{% else %}
					<a href="{{ path('app_login') }}">Connexion</a>
					<a class="pill" href="{{ path('app_register') }}">Créer un compte</a>
				{% endif %}

				<button class="toggle" type="button" onclick="toggleTheme()" title="Basculer le thème">
					<svg width="18" height="18" viewbox="0 0 24 24" fill="none" aria-hidden="true">
						<path d="M12 4.5V3m0 18v-1.5M20.5 12H22M2 12h1.5M17.3 6.7l1.1-1.1M5.6 18.4l1.1-1.1M6.7 6.7 5.6 5.6m12.8 12.8-1.1-1.1" stroke="#dbeafe" stroke-width="2" stroke-linecap="round"/>
						<circle cx="12" cy="12" r="4" stroke="#dbeafe" stroke-width="2"/>
					</svg>
					Thème
				</button>
			</div>
		</div>

		<div class="page"> {% block body %}{% endblock %}
			</div>
		</div>

		{# bulles bokeh derrière tout #}
		<div class="bg-bokeh" aria-hidden="true">
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
		</div>

		{# JS burger #}
		<script>
			(function () {
const burger = document.querySelector('.burger');
const menu = document.getElementById('mainmenu');
if (! burger || ! menu) 
return;



function toggle() {
const open = menu.classList.toggle('open');
burger.classList.toggle('active', open);
burger.setAttribute('aria-expanded', open ? 'true' : 'false');
}

burger.addEventListener('click', toggle);
document.addEventListener('click', (e) => {
if (! menu.classList.contains('open')) 
return;


if (! menu.contains(e.target) && ! burger.contains(e.target)) 
toggle();


});
})();
		</script>
	</body>
</html>
