{% extends 'base.html.twig' %}

{% block title %}Accueil{% endblock %}

{% block body %}
  <section class="hero">
    <h1 class="hero-title">
      Bienvenue sur <span>SkillUp</span> üëã
    </h1>
    <p class="hero-sub">
      √âchange de comp√©tences entre membres ‚Äî propose ton savoir-faire et apprends gratuitement.
    </p>
  </section>

  {% if app.user %}
    {{ form_start(form, {
      method: 'GET',
      action: path('offer_index'),
      attr: { id: 'home-search-form', class: 'search-card' }
    }) }}
      <div class="search-grid">
        <div class="field">
          <label class="label">üéØ j'offre ce skill</label>
          {{ form_widget(form.skillOffered) }}
        </div>

        <div class="field">
          <label class="label">üîÑ je veux ce skill</label>
          {{ form_widget(form.skillRequested) }}
        </div>

        <div class="actions">
          <button type="submit" class="btn btn-primary">üîç Rechercher</button>
          <a href="{{ path('app_home') }}" class="btn btn-ghost">‚Ü© R√©initialiser</a>
        </div>
      </div>
    {{ form_end(form) }}
  {% else %}
    <section class="howitworks">
      <h2 class="steps-title">Comment √ßa marche ?</h2>
      <div class="steps">
        <article class="step-card">
          <figure class="step-media">
            <img src="{{ asset('images/step1-skills.jpg') }}" alt="D√©couvre les offres et comp√©tences" loading="lazy">
          </figure>
          <div class="step-body">
            <h3 class="step-heading">1) D√©couvre les offres</h3>
            <p class="step-text">Parcours les comp√©tences propos√©es par la communaut√© et trouve ce qui t‚Äôint√©resse.</p>
          </div>
        </article>

        <article class="step-card">
          <figure class="step-media">
            <img src="{{ asset('images/step2-mail.png') }}" alt="Envoie une demande d‚Äô√©change" loading="lazy">
          </figure>
          <div class="step-body">
            <h3 class="step-heading">2) Envoie une demande</h3>
            <p class="step-text">Contacte le membre, discutez des modalit√©s et planifiez votre √©change en toute confiance.</p>
          </div>
        </article>

        <article class="step-card">
          <figure class="step-media">
            <img src="{{ asset('images/step3-hands.png') }}" alt="√âchange, apprends et laisse un avis" loading="lazy">
          </figure>
          <div class="step-body">
            <h3 class="step-heading">3) √âchange & progresse</h3>
            <p class="step-text">Partage ton savoir-faire, apprends des autres et laisse un avis pour aider la communaut√©.</p>
          </div>
        </article>
      </div>
    </section>
  {% endif %}

  <section class="cta">
    {% if app.user %}
      <a href="{{ path('app_user_skills_new') }}" class="card">
        <div class="card-emoji">‚ûï</div>
        <div class="card-text">
          <div class="card-title">Ajouter une comp√©tence</div>
          <div class="card-sub">Mets en avant ce que tu peux transmettre</div>
        </div>
      </a>

      <a href="{{ path('app_user_skills_index') }}" class="card">
        <div class="card-emoji">üìã</div>
        <div class="card-text">
          <div class="card-title">Voir mes comp√©tences</div>
          <div class="card-sub">G√®re et mets √† jour ton profil</div>
        </div>
      </a>
    {% else %}
      <a href="{{ path('app_login') }}" class="card">
        <div class="card-emoji">üîê</div>
        <div class="card-title">Se connecter</div>
        <div class="card-sub">Reviens l√† o√π tu t‚Äô√©tais arr√™t√©</div>
      </a>

      <a href="{{ path('app_register') }}" class="card">
        <div class="card-emoji">‚ú®</div>
        <div class="card-title">Cr√©er un compte</div>
        <div class="card-sub">Rejoins la communaut√© SkillUp</div>
      </a>
    {% endif %}
  </section>

  <style>
    :root {
      --primary:#3461ff; --primary-50:#eaf0ff; --text:#2c3e50; --muted:#6b7280;
      --ring:rgba(52,97,255,.18); --card:#fff; --border:#e7e7e9;
      --shadow:0 12px 30px rgba(15,23,42,.06); --radius:14px;
    }

    .hero{ margin:4px 0 14px }
    .hero-title{ margin:0; font-size:clamp(26px,3.2vw,34px); line-height:1.15; color:var(--text); font-weight:800; letter-spacing:.2px }
    .hero-title span{ background:linear-gradient(90deg,var(--primary),#8a5cff); -webkit-background-clip:text; background-clip:text; color:transparent }
    .hero-sub{ margin:6px 0 0; color:var(--muted); font-size:15px }

    .search-card{ background:var(--card); border:1px solid var(--border); border-radius:var(--radius); padding:16px; box-shadow:var(--shadow); margin:16px 0 18px }
    .search-grid{ display:grid; grid-template-columns:1fr; gap:12px }
    @media (min-width:860px){ .search-grid{ grid-template-columns:1fr 1fr auto; align-items:end } }
    .label{ display:block; font-size:12.5px; color:var(--muted); margin:0 0 6px 2px; font-weight:600; letter-spacing:.2px }
    .field select,.field input[type="text"]{ width:100%; padding:.62rem .7rem; border:1px solid var(--border); border-radius:10px; background:#f9fafb; color:var(--text); outline:none; transition: box-shadow .15s, border-color .15s, background .15s, transform .06s }
    .field select:focus,.field input[type="text"]:focus{ border-color:var(--primary); box-shadow:0 0 0 4px var(--ring); background:#fff }
    .field select:hover,.field input[type="text"]:hover{ background:#fff }
    .actions{ display:flex; gap:.6rem; flex-wrap:wrap }
    .btn{ display:inline-flex; align-items:center; justify-content:center; gap:.35rem; text-decoration:none; border-radius:10px; padding:.6rem 1rem; font-weight:700; border:1px solid transparent; transition: transform .06s, filter .15s, background .15s, border-color .15s }
    .btn:active,.btn-primary:active,.btn-ghost:active{ transform:translateY(1px) }
    .btn-primary{ background:var(--primary-50); border-color:#b9c8ff; color:var(--text) }
    .btn-primary:hover{ filter:brightness(.98) }
    .btn-ghost{ background:transparent; border-color:var(--border); color:var(--text) }
    .btn-ghost:hover{ background:#f6f7fb }

    .howitworks{ margin:18px 0 8px }
    .steps-title{ margin:0 0 10px; font-size:18px; font-weight:800; color:var(--text); letter-spacing:.2px }
    .steps{ display:grid; grid-template-columns:1fr; gap:12px }
    @media(min-width:860px){ .steps{ grid-template-columns:repeat(3,1fr) } }
    .step-card{ background:var(--card); border:1px solid var(--border); border-radius:var(--radius); overflow:hidden; box-shadow:var(--shadow); display:flex; flex-direction:column; transition: transform .06s, box-shadow .15s }
    .step-card:hover{ transform:translateY(-1px); box-shadow:0 18px 36px rgba(15,23,42,.08) }

    /* ‚úÖ centrage + fond blanc derri√®re l‚Äôimage */
    .step-media {
  width: 100%;
  aspect-ratio: 16/9;
  background: #fff;              
  display: flex;                 /* Flex pour g√©rer l'alignement */
  align-items: center;           /* toujours centr√© verticalement */
  justify-content: flex-start;   /* image coll√©e √† gauche */
  padding-left: 30px;            /* petit espace avec le bord */
  overflow: hidden;
    }
    .step-media img{
      max-width:100%;
      max-height:100%;
      object-fit:contain;              /* pas de recadrage, on garde l‚Äôimage enti√®re */
      display:block;
    }

    .step-body{ padding:12px 14px }
    .step-heading{ margin:0 0 4px; font-weight:800; font-size:16px; color:var(--text) }
    .step-text{ margin:0; color:var(--muted); font-size:14px }

    .cta{ display:grid; grid-template-columns:1fr; gap:14px; margin-top:14px }
    @media (min-width:760px){ .cta{ grid-template-columns:1fr 1fr } }
    .card{ display:grid; grid-template-columns:56px 1fr; gap:12px; align-items:center; padding:14px; background:var(--card); border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow); text-decoration:none; color:var(--text); transition: transform .06s, box-shadow .15s }
    .card:hover{ transform:translateY(-1px); box-shadow:0 18px 36px rgba(15,23,42,.08) }
    .card-emoji{ width:56px; height:56px; border-radius:12px; display:grid; place-items:center; font-size:24px; background:#f4f6ff; border:1px solid #e0e6ff }
    .card-title{ font-weight:800; letter-spacing:.2px }
    .card-sub{ color:var(--muted); font-size:13px; margin-top:2px }
  </style>
{% endblock %}
